<div class="flex max-w-7xl mx-auto gap-4 mt-4">
  <div *ngFor="let status of ['Open', 'In Progress', 'Done']" class="relative bg-gray-200 w-full rounded-md p-4 flex-1 transition-colors duration-300" (drop)="onDrop($event, status)" (dragover)="$event.preventDefault()">
    <div class="flex items-center justify-between mb-4">
      <h3 class="font-bold text-lg text-gray-600">{{ status | titlecase }}</h3>
      <button class="add-task-btn" (click)="addTask(status)" title="Ajouter une tâche">＋</button>
    </div>

    <div class="flex flex-col gap-4">
      <div *ngFor="let task of getTaskByStatus(status)" class="bg-white px-5 py-3 rounded-md cursor-pointer transition-transform duration-200 ease-in-out animate-fade-in" [draggable]="editingTaskId !== task.id" (dragstart)="onDragStart($event, task)" (dragend)="onDragEnd($event)">
        <ng-container *ngIf="editingTaskId !== task.id; else editBlock">
          <div (click)="startEdit(task)">
            <!-- Titles removed: show only description -->
            <p class="task-desc">{{ task.description }}</p>
          </div>
        </ng-container>

        <ng-template #editBlock>
          <div class="kanban-edit">
            <!-- Single-line input to feel like editing inline; save on blur/enter, cancel on Escape -->
            <input id="edit-input-{{task.id}}" class="kanban-input" type="text" [(ngModel)]="editedDescription" (keydown.enter)="saveEdit(task)" (keydown.escape)="cancelEdit()" (blur)="saveEdit(task)" />
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>